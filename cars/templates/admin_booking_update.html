{% extends "base.html" %}
{% block title %}Update Booking | Velocity Admin{% endblock %}

{% block content %}
<div class="flex min-h-screen bg-gray-950 text-gray-200">

  <!-- Admin Sidebar -->
  <aside class="w-64 bg-gray-900 border-r border-gray-800 p-6 hidden md:block">
    <h2 class="text-2xl font-bold text-yellow-400 mb-10">ADMIN</h2>

    <nav class="space-y-3 text-sm">
      <a href="{% url 'admin_dashboard' %}" class="block px-4 py-2 rounded-lg hover:bg-gray-800 transition">
        Dashboard
      </a>
      <a href="{% url 'admin_cars' %}" class="block px-4 py-2 rounded-lg hover:bg-gray-800 transition">
        Manage Cars
      </a>
      <a href="{% url 'admin_bookings' %}" class="block px-4 py-2 rounded-lg bg-yellow-400 text-black font-semibold">
        Manage Bookings
      </a>
      <a href="{% url 'admin_users' %}" class="block px-4 py-2 rounded-lg hover:bg-gray-800 transition">
        Users
      </a>
      <hr class="border-gray-800 my-4">
      <a href="{% url 'logout' %}" class="block px-4 py-2 rounded-lg hover:bg-gray-800 transition text-red-400">
        Logout
      </a>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 p-8">

    <!-- Header -->
    <div class="mb-10">
      <h1 class="text-3xl font-bold">Update Booking Status</h1>
    </div>

    <!-- Form -->
    <div class="bg-gray-900 border border-gray-800 rounded-2xl p-8 max-w-2xl">

      <form method="POST" class="space-y-6">
        {% csrf_token %}

        <!-- Booking Info (Read-only) -->
        <div class="pb-6 border-b border-gray-800">
          <h2 class="text-lg font-semibold mb-4">Booking Information</h2>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="text-gray-400 text-sm">Customer</label>
              <p class="text-white font-medium mt-1">{{ booking.user.full_name }}</p>
            </div>
            <div>
              <label class="text-gray-400 text-sm">Car</label>
              <p class="text-white font-medium mt-1">{{ booking.car.brand }} {{ booking.car.car_model }}</p>
            </div>
            <div>
              <label class="text-gray-400 text-sm">Pickup Date</label>
              <p class="text-white mt-1">{{ booking.start_date }}</p>
            </div>
            <div>
              <label class="text-gray-400 text-sm">Return Date</label>
              <p class="text-white mt-1">{{ booking.end_date }}</p>
            </div>
            <div>
              <label class="text-gray-400 text-sm">Total Price</label>
              <p class="text-yellow-400 font-medium mt-1">${{ booking.total_price }}</p>
            </div>
          </div>
        </div>

        <!-- Status -->
        <div>
          <label class="block text-gray-300 font-medium mb-2">Booking Status</label>
          <select name="status" required class="w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:border-yellow-400 focus:outline-none text-white">
            <option value="Active" {% if booking.status == 'Active' %}selected{% endif %}>Active</option>
            <option value="Completed" {% if booking.status == 'Completed' %}selected{% endif %}>Completed</option>
            <option value="Cancelled" {% if booking.status == 'Cancelled' %}selected{% endif %}>Cancelled</option>
          </select>
        </div>

        <!-- Submit Button -->
        <div class="pt-6 border-t border-gray-800 flex gap-4">
          <button type="submit" class="bg-yellow-400 text-black px-6 py-3 rounded-lg font-semibold hover:opacity-90 transition">
            Update Status
          </button>
          <a href="{% url 'admin_bookings' %}" class="bg-gray-800 hover:bg-gray-700 px-6 py-3 rounded-lg font-semibold transition">
            Cancel
          </a>
        </div>

      </form>

    </div>

  </main>
</div>
{% endblock %}
